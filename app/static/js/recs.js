// Generated by CoffeeScript 1.4.0
(function() {
  var root;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  root.addExpectation = function(recsyes, recsno) {
    var fid, funders, _i, _j, _len, _len1;
    funders = {};
    for (_i = 0, _len = recsyes.length; _i < _len; _i++) {
      fid = recsyes[_i];
      if (fid.length) {
        funders[fid] = true;
      }
    }
    for (_j = 0, _len1 = recsno.length; _j < _len1; _j++) {
      fid = recsno[_j];
      if (fid.length) {
        funders[fid] = false;
      }
    }
    return funders;
  };

  root.checkExpectations = function(is_checked, funder_relations) {
    var funder_id, recs, _i, _len, _ref;
    recs = {};
    _ref = _.keys(funder_relations);
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      funder_id = _ref[_i];
      recs[funder_id] = is_checked === funder_relations[funder_id];
    }
    return recs;
  };

  root.getRecommended = function(reality) {
    var fid, funders, recs, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;
    recs = {};
    _ref = _.values(reality);
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      funders = _ref[_i];
      _ref1 = _.keys(funders);
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        fid = _ref1[_j];
        if (!(recs[fid] != null)) {
          recs[fid] = funders[fid];
        } else {
          recs[fid] = recs[fid] && funders[fid];
        }
      }
    }
    _ref2 = _.keys(recs);
    _results = [];
    for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
      fid = _ref2[_k];
      if (recs[fid]) {
        _results.push(fid);
      }
    }
    return _results;
  };

}).call(this);
